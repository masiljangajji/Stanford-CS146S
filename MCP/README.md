## MCP(Model Context Protocol)란? (01)

- MCP = AI 모델과 외부 데이터 및 서비스를 연결하는 표준
- MCP 서버 = LLM(대규모 언어 모델)이나 AI 에이전트가 외부 도구, 데이터, 기능(API 등)과 상호작용할 수 있도록 표준화된 인터페이스를 제공하는 서버

MCP는 클라이언트-서버 구조를 따릅니다.
MCP 클라이언트는 AI 애플리케이션(챗봇, IDE 어시스턴트, 에이전트)에 내장되고
MCP 서버는 표준화된 JSON-RPC 메시지를 통해 외부 기능을 노출합니다.

MCP 상호작용의 단계별 흐름

1. MCP 서버에 연결하여 프로토콜 핸드셰이크 수행,
2. 사용 가능한 도구/리소스 탐색,
3. LLM이 적절한 도구 선택,
4. MCP를 통한 도구 호출,
5. LLM에 결과 반환, MCP는 도구 실행을 위한 표준화된 호출/응답 계층을 제공

MCP는 안전하고 확장 가능한 원격 연결을 위해 OAuth2.0을 사용
MCP 서버를 구축할 때는 사용자 러그인(인증)과 MCP 클라이언트가 사용자 계정의 리소스에 접근하도록 허용하는 방법(인가) 모두 필요

## API는 좋은 MCP 도구가 되기 어렵다. (02)

1. 에이전트는 도구가 많으면 힘들어한다.
   처음부터 MCP 용으로 설계된 도구는 개별 웹 API보다 훨씬 유연하며, 하나의 도구가 여러 개별 API의 역할을 수행할 수 있다.

2. API는 컨테스트 윈도우를 빠르게 소진시킨다.
   한 번에 100개의 레코드를 반환하는 API에서 각 레코드가 넓다면 많은 토큰을 소비한다.
   JSON은 토큰 효율이 매우 낮은 형식, CSV나 YAML이 더 나은 선택

- 레코드당 토큰을 절반으로 줄일 수 있는 CSV 형식
- 필드 프로젝션, 자동 잘라내기, JSON→CSV 변환 등의 개선 가능
- 하지만 대부분의 서버는 이런 최적화를 하지 않음

3. 에이전트가 API를 직접 호출할 수 있다
   Claude Code 같은 에이전트는 API를 직접 호출가능한데, 이것이 중개자를 통하는 것보다 나을 수 있다.


아래가 하나의 레코드를 의미
레코드가 넓다는건?? 여러개의 필드가 존재한다는 것

```json
{
  "id": 1,
  "name": "Lee",
  "email": "lee@gmail.com",
  "phone": "010-1234-5678",
  "address": "Seoul ...",
  "createdAt": "2026-02-11T10:22:00Z",
  "updatedAt": "2026-02-11T10:22:00Z",
  "profileImageUrl": "...",
  "bio": "나는 백엔드 개발자고 ... (엄청 긴 설명)",
  "settings": {...},
  "roles": [...],
  "paymentHistory": [...],
  "recentLogs": [...]
}
```

json은 토큰사용이 많은것이 key 값이 반복되고, `{`,`}`,`,` 등의 기호가 많이 사용됨

```json
[
{ "id": 1, "name": "Lee", "age": 25 },
{ "id": 2, "name": "Kim", "age": 30 },
{ "id": 3, "name": "Park", "age": 28 }
]
```

csv는 훨씬 단순화, 토큰사용이 적음

```csv
id,name,age
1,Lee,25
2,Kim,30
3,Park,28
```



